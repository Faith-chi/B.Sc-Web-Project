<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Create Account</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="../stylesheets/createaccount.css" />
    <script src="../../src/scripts/createaccount.js"></script>
  </head>
  <body>
    <div class="body-container">
      <section>
        <div id="nav-bar">
          <div>
            <ul>
              <div class="nav-bar-links">
                <li><a href="homepage.html">Home</a></li>
                <li><a href="appointment.html">Appointment</a></li>
                <li><a href="reminder.html">Reminders</a></li>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="#">Health Resources</a></li>
              </div>
            </ul>
          </div>
          <div class="rhs">
            <ul>
              <li><a href="#">contact sales</a></li>
              <li><a href="login.html">log in</a></li>
              <li>
                <div class="signup">
                  <a href="#" class="signup"> sign up free</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </section>

      <section>
        <div class="progress-indicator">
          <div class="step completed">
            <span class="number">1</span>
            <span class="label">Account Type</span>
          </div>
          <div class="step active">
            <span class="number">2</span>
            <span class="label">Personal information</span>
          </div>
          <div class="step">
            <span class="number">3</span>
            <span class="label">Profile Data</span>
          </div>
        </div>

        <div class="form-container">
          <form action="" id="login" class="login">
            <div class="card-header">
              <h2>User Details</h2>
            </div>
            <div class="forminputs">
              <label for="email">Email</label><br>
              <input type="email"><br>
              <label for="password">Password</label><br>
              <input type="password">
            </div><br><br>
            <div class="navigation-buttons">
              <button type="button" id="prev">Previous</button>
              <button type="button" id="next" onclick="nextBtnClick()" >Next</button>
            </div>
          </form>

          <form action="" id="createAccount" class="create-account">
            <div class="card-header">
              <h2>Create Account</h2>
            </div>
            <div class="card-info-div">
              <p>Please fill out this form with the required information</p>
            </div>

            <div class="card-input-list">
              <ul>
                <li>
                  <label for="singlepet-option"> Single pet </label>
                  <input
                    type="checkbox"
                    id="singlepet-option"
                    name="accountType"
                    value="singlePet"
                    onclick="onlyOne(this)"
                  />
                </li>

                <li>
                  <label for="multiplepet-option">
                    I have more than one pet
                  </label>
                  <input
                    type="checkbox"
                    id="multiplepet-option"
                    name="accountType"
                    value="multiplePet"
                    onclick="onlyOne(this)"
                  />
                </li>
                <li>
                  <label for="breader-option"> I'm a Breader </label>
                  <input
                    type="checkbox"
                    id="breader-option"
                    name="accountType"
                    value="breaderPet"
                    onclick="onlyOne(this)"
                  />
                </li>
              </ul>
            </div>

            <div class="navigation-buttons">
              <button type="button" id="prev">Previous</button>
              <button type="button" id="next" onclick="nextBtnClick()" >Next</button>
            </div>            
            <script>
              function onlyOne(checkbox) {
                const checkboxes = document.getElementsByName("accountType");
                checkboxes.forEach((item) => {
                  if (item !== checkbox) item.checked = false;
                });
              }

              function nextBtnClick() {
                const nextButton = document.getElementById("next");
                const createAccountCard =
                  document.getElementById("createAccount");
                const petDetailsCard = document.getElementById("petDetails");

                // Event listeners for navigation buttons
                //   if (currentStep < steps.length) {
                //     currentStep++;
                //     updateProgress();
                //   }
                createAccountCard.classList.replace(
                  "create-account",
                  "create-account-unrendered"
                );
                petDetailsCard.classList.replace(
                  "pet-details",
                  "pet-details-rendered"
                );

                console.log("sjwuihywkiowkjjn");
              }

              function prevBtnClick() {
                const prevButton = document.getElementById("pet-prev");
                const createAccountCard =
                  document.getElementById("createAccount");
                const petDetailsCard = document.getElementById("petDetails");

                createAccountCard.classList.replace(
                  "create-account-unrendered",
                  "create-account"
                );
                petDetailsCard.classList.replace(
                  "pet-details-rendered",
                  "pet-details"
                );
              }

              import { registerUser } from "./auth.js";

              document.getElementById("submit-signup").addEventListener("click", async (event) => {
                  event.preventDefault();

                  const email = document.getElementById("email").value;
                  const password = document.getElementById("password").value;
                  const petName = document.getElementById("pet-name").value;
                  const petBreed = document.getElementById("pet-breed").value;
                  const petAge = document.getElementById("pet-age").value;

                  // Check user type selections
                  const userType = [];
                  if (document.getElementById("single-pet").checked)
                    userType.push("Single Pet Owner");
                  if (document.getElementById("multiple-pets").checked)
                    userType.push("Multiple Pet Owner");
                  if (document.getElementById("breeder").checked)
                    userType.push("Breeder");

                  try {
                    await registerUser(
                      email,
                      password,
                      petName,
                      petBreed,
                      petAge,
                      userType
                    );
                    alert("Sign-up successful!");
                    window.location.href = "dashboard.html"; // Redirect after sign-up
                  } catch (error) {
                    console.error("Error signing up:", error);
                    alert("Sign-up failed: " + error.message);
                  }
                });
            </script>
          </form>

          <form action="" id="petDetails" class="pet-details">
            <div class="pet-card-header">
              <h2>Pet Details</h2>
            </div>
            <div class="pet-card-info-div">
              <p>please fill out this form with the required information</p>
            </div>
            <div class="pet-card-input-list">
              <ul>
                <li>
                  <label for="pet-name">Name</label><br />
                  <input type="text" placeholder="Jimmy" id="pet-name" /><br />
                </li>
                <li>
                  <label for="">Age</label><br />
                  <input type="text" id="pet-age" placeholder="1" /><br />
                </li>
                <li>
                  <label for="">Breed</label><br />
                  <input
                    type="text"
                    id="pet-breed"
                    placeholder="Cane Corso"
                  /><br />
                </li>
              </ul>
            </div>

            <div class="navigation-buttons">
              <button type="button" id="pet-prev" onclick="prevBtnClick()">
                Previous
              </button>
              <button type="button" id="submit-signup">Next</button>
            </div>
          </form>
        </div>
      </section>
      <section class="footer"></section>
    </div>
    <div class="footer">
      <div class="footer-logo">
        <i class="fa fa-paw"></i>
        <span><a href="#">PetStore</a></span>
      </div>
      <div class="footer-links">
        <ul class="rfl">
          <li><a>Cidney Veterinary</a></li>
          <li><a>Product</a></li>
          <li><a>Community</a></li>
          <li><a>For Teams</a></li>
          <li><a>About Us</a></li>
        </ul>
        <ul class="lfl">
          <li>
            <a><i class="fa fa-facebook"></i></a>
          </li>
          <li>
            <a><i class="fa fa-instagram"></i></a>
          </li>
          <li>
            <a><i class="fa fa-twitter"></i></a>
          </li>
          <li>
            <a><i class="fa fa-tiktok"></i></a>
          </li>
        </ul>
      </div>
      <div class="footer-bottom">
        <small>Copyright @ 2025, Faith Ifeanacho, All rights reserved</small>
        <div class="policy-links">
          <a href="#">Terms&Condition</a>
          <a href="#">Privacy policy</a>
        </div>
      </div>
    </div>
  </body>
</html>
